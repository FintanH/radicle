#!/usr/bin/env bash

set -euo pipefail

ipns_name=${1:-$(uuidgen)}
empty_machine="zdpuAyyGtvC37aeZid2zh7LAGKCbFTn9MzdqoPpbNQm3BCwWT"
ipns_id=$(bin/radicle-ipfs key gen "$ipns_name" --type ed25519)
bin/radicle-ipfs name publish --key "$ipns_id" "$empty_machine" >/dev/null
echo "Created machine $ipns_id"
