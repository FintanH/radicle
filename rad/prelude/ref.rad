(ns prelude.ref
  "Functions for dealing with reference cells.")

(def modify-ref
  "Modify `r` by applying the function `f`. Returns the new value."
  (fn [r f]
    (primitives//write-ref r (f (primitives//read-ref r)))))
